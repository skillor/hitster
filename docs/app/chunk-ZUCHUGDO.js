import{a as W,b as j,c as R,d as D,f as q,g as U,h as K,i as X,j as H,l as b,m as I,p as J}from"./chunk-2GDVZUN2.js";import{Ca as L,Da as u,Fa as V,Ga as z,I as O,M,N as w,Na as G,O as f,Oa as N,P as x,Qa as A,Ra as B,S as E,X as a,Y as F,Za as P,a as C,da as _,fa as r,ga as v,ka as t,la as n,ma as y,pa as k,ra as m,sa as S,xa as l,ya as T}from"./chunk-AIQTEJT4.js";function Z(o,d){if(o&1){let g=k();t(0,"button",36),m("click",function(){M(g);let p=S();return w(p.paste())}),f(),t(1,"svg",37),y(2,"path",38),n()()}if(o&2){let g=S();v("animate-bg-error-to-neutral",g.clipboardError)}}function Q(o,d){if(o&1&&(t(0,"option",39),l(1),n()),o&2){let g=d.$implicit;r("value",g.value),a(),T(g.key)}}function Y(o,d){if(o&1&&(f(),x(),t(0,"div",40)(1,"a",41),l(2," Login "),f(),t(3,"svg",42),y(4,"path",43),n()()()),o&2){let g=S();a(),v("btn-disabled",g.disableSpotifyLogin)}}function $(o,d){if(o&1){let g=k();t(0,"app-starting-modal",44),m("close",function(){M(g);let p=S();return w(p.clickFirstStart())}),n()}o&2&&r("loading",!1)}function ee(o,d){o&1&&y(0,"iframe",45)}var h=()=>({standalone:!0}),de=(()=>{let d=class d{requestFullscreen(){document.body.style.zoom="",document.documentElement.requestFullscreen({navigationUI:"hide"}).then(()=>setTimeout(()=>this.skippingResize=!1,200)),this.skippingResize=!0}clickFirstStart(){b()&&this.requestFullscreen(),this.startingModal=!1}resizeEvent(e){this.startingModal||this.skippingResize||b()&&(this.startingModal=!0)}constructor(e){this.router=e,this.hasClipboard=navigator.clipboard&&navigator.clipboard.readText,this.hiddenInputString="assets/playlists/classic-english.json",this.playlists={Classic:"assets/playlists/classic-english.json","Classic (Deutsch)":"assets/playlists/classic-deutsch.json",Massive:"assets/playlists/massive.json","Perfect Playlist":"assets/playlists/perfect.json","Wild Mix":"assets/playlists/wild-mix.json"},this.clipboardError=!1,this.startingModal=!0,this.skippingResize=!1,this.settings={keepWrongGuesses:!0,seed:"",handleTimes:"fix-tags",limit:0},this.gameSettingsLimit="",this.inputString="",this.selectString="",this.hasMobileUserAgent=I(),this.removeSpotifyEmbed=I(),this.disableSpotifyLogin=!0}validateGameSettingsLimit(){let e=+this.gameSettingsLimit;return isNaN(e)||e<0?null:e}ngOnInit(){(!b()||document.fullscreenElement)&&(this.startingModal=!1);let e=localStorage.getItem("game_settings");e&&(this.settings=C(C({},this.settings),JSON.parse(e))),this.settings.seed="",this.selectString=this.hiddenInputString,this.validateInput()}paste(){navigator.clipboard.readText().then(e=>{H(e)?(this.inputString=e,this.inputChange()):this.clipboardError=!0}).catch(()=>{})}validateInput(){let e=this.inputString;return e==""&&(e=this.hiddenInputString),H(e)}inputChange(){return this.selectString="",this.validateInput()}selectChange(){this.inputString="",this.hiddenInputString=this.selectString}start(){let e=this.validateInput();e&&this.startGame(e)}startGame(e){localStorage.removeItem("cached_playlist");let p=this.validateGameSettingsLimit();p!==null&&(this.settings.limit=p),localStorage.setItem("game_settings",JSON.stringify(this.settings)),localStorage.setItem("playlist_link",e.raw),this.router.navigate(["play"])}messageEvent(e){if(e.origin=="https://open.spotify.com"){if(e.data.type=="ready")document.getElementById("spotify-embed").contentWindow.postMessage({command:"play_from_start"},"*");else if(e.data.type=="playback_update"){if(e.data.payload.duration==0)return;e.data.payload.duration<43300&&(this.disableSpotifyLogin=!1),this.removeSpotifyEmbed=!0}}}};d.\u0275fac=function(p){return new(p||d)(F(P))},d.\u0275cmp=O({type:d,selectors:[["app-home"]],hostBindings:function(p,i){p&1&&m("resize",function(s){return i.resizeEvent(s)},!1,E)("message",function(s){return i.messageEvent(s)},!1,E)},standalone:!0,features:[L],decls:58,vars:31,consts:[[1,"hero","min-h-screen","bg-base-200"],[1,"hero-content","flex-col","lg:flex-row"],[1,"text-center","lg:text-left"],[1,"text-5xl","font-bold"],[1,"py-6"],[1,"card","shrink-0","w-full","max-w-sm","shadow-2xl","bg-base-100"],[1,"card-body"],[1,"form-control"],[1,"label"],[1,"label-text"],[1,"flex","flex-row","gap-2"],["placeholder","spotify.com/playlist/13DZqkaAHiTY0nXtQf9iW0",1,"w-0","input","input-bordered","flex-grow","placeholder-neutral",3,"ngModel","ngModelOptions","ngModelChange"],["class","btn btn-neutral",3,"animate-bg-error-to-neutral","click",4,"ngIf"],[1,"select","select-bordered","text-base",3,"ngModel","ngModelOptions","change","ngModelChange"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control","mt-6"],[1,"btn","btn-primary","btn-lg","font-bold","text-2xl",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-8","h-8","text-content-primary"],["fill-rule","evenodd","d","M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z","clip-rule","evenodd"],["class","form-control mt-2",4,"ngIf"],[1,"collapse","collapse-arrow"],[1,"collapse-title","text-nowrap"],[1,"collapse-content"],[1,"label","gap-2"],["placeholder","\u221E",1,"w-0","flex-grow","max-w-48","input","input-sm","input-bordered","placeholder-neutral",3,"ngModel","ngModelOptions","ngModelChange"],["placeholder","random",1,"w-0","flex-grow","max-w-48","input","input-sm","input-bordered","placeholder-neutral",3,"ngModel","ngModelOptions","ngModelChange"],[1,"label","gap-3","cursor-pointer"],["type","checkbox","checked","checked",1,"checkbox",3,"ngModel","ngModelOptions","ngModelChange"],[1,"select","select-bordered","select-sm","text-sm","w-full","my-2",3,"ngModel","ngModelOptions","ngModelChange"],["value","fix-all"],["value","keep-all"],["value","fix-tags"],["value","remove-tags"],[3,"loading","close",4,"ngIf"],["id","spotify-embed","class","hidden","src","https://open.spotify.com/embed/track/2bNCdW4rLnCTzgqUXTTDO1?utm_source=generator","width","1","height","1","frameBorder","0","allow","autoplay; clipboard-write; encrypted-media; picture-in-picture",4,"ngIf"],[1,"btn","btn-neutral",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"],[3,"value"],[1,"form-control","mt-2"],["href","https://spotify.com/login","target","_blank",1,"btn","btn-neutral","text-lg"],["fill","currentColor","width","24","height","24","xmlns","http://www.w3.org/2000/svg","fill-rule","evenodd","clip-rule","evenodd"],["d","M19.098 10.638c-3.868-2.297-10.248-2.508-13.941-1.387-.593.18-1.22-.155-1.399-.748-.18-.593.154-1.22.748-1.4 4.239-1.287 11.285-1.038 15.738 1.605.533.317.708 1.005.392 1.538-.316.533-1.005.709-1.538.392zm-.126 3.403c-.272.44-.847.578-1.287.308-3.225-1.982-8.142-2.557-11.958-1.399-.494.15-1.017-.129-1.167-.623-.149-.495.13-1.016.624-1.167 4.358-1.322 9.776-.682 13.48 1.595.44.27.578.847.308 1.286zm-1.469 3.267c-.215.354-.676.465-1.028.249-2.818-1.722-6.365-2.111-10.542-1.157-.402.092-.803-.16-.895-.562-.092-.403.159-.804.562-.896 4.571-1.045 8.492-.595 11.655 1.338.353.215.464.676.248 1.028zm-5.503-17.308c-6.627 0-12 5.373-12 12 0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"],[3,"loading","close"],["id","spotify-embed","src","https://open.spotify.com/embed/track/2bNCdW4rLnCTzgqUXTTDO1?utm_source=generator","width","1","height","1","frameBorder","0","allow","autoplay; clipboard-write; encrypted-media; picture-in-picture",1,"hidden"]],template:function(p,i){p&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Start now!"),n(),t(5,"p",4),l(6,"Enter a spotify playlist or select a preconfigured playlist to play a game of Hitster!"),n()(),t(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8)(11,"span",9),l(12,"Spotify Playlist"),n()(),t(13,"div",10)(14,"input",11),m("ngModelChange",function(){return i.inputChange()})("ngModelChange",function(s){return i.inputString=s}),n(),_(15,Z,3,2,"button",12),n()(),t(16,"div",7)(17,"label",8)(18,"span",9),l(19,"Playlist"),n()(),t(20,"select",13),m("change",function(){return i.selectChange()})("ngModelChange",function(s){return i.selectString=s}),t(21,"option",14),l(22),n(),_(23,Q,2,2,"option",15),V(24,"keyvalue"),n()(),t(25,"div",16)(26,"button",17),m("click",function(){return i.start()}),l(27," Start "),f(),t(28,"svg",18),y(29,"path",19),n()()(),_(30,Y,5,2,"div",20),x(),t(31,"details",21)(32,"summary",22),l(33,"Advanced Settings"),n(),t(34,"div",23)(35,"label",24)(36,"span",9),l(37,"Game Limit"),n(),t(38,"input",25),m("ngModelChange",function(s){return i.gameSettingsLimit=s}),n()(),t(39,"label",24)(40,"span",9),l(41,"Seed"),n(),t(42,"input",26),m("ngModelChange",function(s){return i.settings.seed=s}),n()(),t(43,"label",27)(44,"span",9),l(45,"Keep wrong guesses"),n(),t(46,"input",28),m("ngModelChange",function(s){return i.settings.keepWrongGuesses=s}),n()(),t(47,"select",29),m("ngModelChange",function(s){return i.settings.handleTimes=s}),t(48,"option",30),l(49,"Fix Everything"),n(),t(50,"option",31),l(51,"Keep Everything"),n(),t(52,"option",32),l(53,"Fix tags like Remastered"),n(),t(54,"option",33),l(55,"Remove tags like Remastered"),n()()()()()()()(),_(56,$,1,1,"app-starting-modal",34)(57,ee,1,0,"iframe",35)),p&2&&(a(14),v("input-error",!i.validateInput()),r("ngModel",i.inputString)("ngModelOptions",u(25,h)),a(),r("ngIf",i.hasClipboard),a(5),r("ngModel",i.selectString)("ngModelOptions",u(26,h)),a(2),T(i.inputString?"Custom":"Select playlist?"),a(),r("ngForOf",z(24,23,i.playlists)),a(3),r("disabled",!i.validateInput()),a(4),r("ngIf",!i.hasMobileUserAgent),a(8),v("input-error",i.validateGameSettingsLimit()===null),r("ngModel",i.gameSettingsLimit)("ngModelOptions",u(27,h)),a(4),r("ngModel",i.settings.seed)("ngModelOptions",u(28,h)),a(4),r("ngModel",i.settings.keepWrongGuesses)("ngModelOptions",u(29,h)),a(),r("ngModel",i.settings.handleTimes)("ngModelOptions",u(30,h)),a(9),r("ngIf",i.startingModal),a(),r("ngIf",!i.removeSpotifyEmbed))},dependencies:[B,G,N,A,X,U,K,j,W,q,R,D,J]});let o=d;return o})();export{de as HomeComponent};
