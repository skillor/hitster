import{a as D,b as G,c as z,d as q,f as K,g as X,h as J,i as U,j as x,k as Q,l as Y}from"./chunk-KFYPXP7P.js";import{Aa as f,Ca as N,Da as j,Ea as A,F as w,J as E,K as k,Ka as R,L as v,La as W,Na as B,Oa as L,P as I,U as l,V as S,Wa as P,a as b,aa as u,ca as r,da as C,ha as n,ia as i,ja as h,ka as T,la as H,ma as O,oa as c,pa as y,ta as F,ua as a,va as M,za as V}from"./chunk-3H3GWGAR.js";function Z(o,s){if(o&1){let g=O();n(0,"button",33),c("click",function(){E(g);let d=y();return k(d.paste())}),v(),n(1,"svg",34),h(2,"path",35),i()()}if(o&2){let g=y();C("animate-bg-error-to-neutral",g.clipboardError)}}function $(o,s){if(o&1&&(n(0,"option",36),a(1),i()),o&2){let g=s.$implicit;r("value",g.value),l(),M(g.key)}}function ee(o,s){o&1&&(T(0),a(1,"Start"),H())}function te(o,s){o&1&&h(0,"span",37)}function ne(o,s){if(o&1&&(n(0,"div",38)(1,"a",39),a(2," Login "),v(),n(3,"svg",40),h(4,"path",41),i()()()),o&2){let g=y();l(),C("btn-disabled",g.disableSpotifyLogin)}}function ie(o,s){o&1&&h(0,"iframe",42)}var _=()=>({standalone:!0}),ge=(()=>{let s=class s{constructor(e,d){this.router=e,this.spotifyApi=d,this.hasClipboard=navigator.clipboard&&navigator.clipboard.readText,this.hiddenInputString="assets/playlists/classic-english.json",this.playlists={Classic:"assets/playlists/classic-english.json","Classic (Deutsch)":"assets/playlists/classic-deutsch.json","Wild Mix":"assets/playlists/wild-mix.json","Perfect Playlist":"assets/playlists/perfect.json"},this.loading=!1,this.clipboardError=!1,this.settings={keepWrongGuesses:!0,seed:"",handleRemasters:"fix"},this.inputString="",this.selectString="",this.isMobile=Q(),this.removeSpotifyEmbed=this.isMobile,this.disableSpotifyLogin=!0}ngOnInit(){document.exitFullscreen().catch(()=>{});let e=localStorage.getItem("game_settings");e&&(this.settings=b(b({},this.settings),JSON.parse(e))),this.settings.seed="",this.selectString=this.hiddenInputString,this.validateInput()}paste(){navigator.clipboard.readText().then(e=>{x(e)?(this.inputString=e,this.inputChange()):this.clipboardError=!0}).catch(()=>{})}validateInput(){let e=this.inputString;return e==""&&(e=this.hiddenInputString),x(e)}inputChange(){return this.selectString="",this.validateInput()}selectChange(){this.inputString="",this.hiddenInputString=this.selectString}start(){let e=this.inputChange();e&&this.startGame(e)}startGame(e){if(this.loading=!0,localStorage.removeItem("cached_playlist"),localStorage.setItem("game_settings",JSON.stringify(this.settings)),localStorage.setItem("playlist_link",e.raw),e.type=="spotify-playlist"||e.type=="json"){this.router.navigate(["play"]);return}}messageEvent(e){e.origin=="https://open.spotify.com"&&(e.data.type=="ready"?document.getElementById("spotify-embed").contentWindow.postMessage({command:"play_from_start"},"*"):e.data.type=="playback_update"&&(e.data.payload.duration<43300&&(this.disableSpotifyLogin=!1),this.removeSpotifyEmbed=!0))}};s.\u0275fac=function(d){return new(d||s)(S(P),S(Y))},s.\u0275cmp=w({type:s,selectors:[["app-home"]],hostBindings:function(d,t){d&1&&c("message",function(p){return t.messageEvent(p)},!1,I)},standalone:!0,features:[V],decls:51,vars:25,consts:[[1,"hero","min-h-screen","bg-base-200"],[1,"hero-content","flex-col","lg:flex-row"],[1,"text-center","lg:text-left"],[1,"text-5xl","font-bold"],[1,"py-6"],[1,"card","shrink-0","w-full","max-w-sm","shadow-2xl","bg-base-100"],[1,"card-body"],[1,"form-control"],[1,"label"],[1,"label-text"],[1,"flex","flex-row","gap-2"],["placeholder","spotify.com/playlist/13DZqkaAHiTY0nXtQf9iW0",1,"input","input-bordered","flex-grow","placeholder-neutral",3,"ngModel","ngModelOptions","ngModelChange"],["class","btn btn-neutral",3,"animate-bg-error-to-neutral","click",4,"ngIf"],[1,"select","select-bordered","text-base",3,"ngModel","ngModelOptions","change","ngModelChange"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control","mt-6"],[1,"btn","btn-primary","btn-lg","font-bold","text-2xl",3,"disabled","click"],[4,"ngIf","ngIfElse"],["loadingT",""],["class","form-control mt-2",4,"ngIf"],[1,"collapse","collapse-arrow"],[1,"collapse-title"],[1,"collapse-content"],[1,"label","gap-2"],["placeholder","random",1,"input","input-sm","input-bordered","placeholder-neutral",3,"ngModel","ngModelOptions","ngModelChange"],[1,"label","gap-3","cursor-pointer"],["type","checkbox","checked","checked",1,"checkbox",3,"ngModel","ngModelOptions","ngModelChange"],[1,"select","select-bordered","select-sm","text-sm","w-full","my-2",3,"ngModel","ngModelOptions","ngModelChange"],["value","fix"],["value","keep"],["value","remove"],["id","spotify-embed","class","hidden","src","https://open.spotify.com/embed/track/2bNCdW4rLnCTzgqUXTTDO1?utm_source=generator","width","1","height","1","frameBorder","0","allow","autoplay; clipboard-write; encrypted-media; picture-in-picture",4,"ngIf"],[1,"btn","btn-neutral",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"],[3,"value"],[1,"loading","loading-spinner","loading-lg"],[1,"form-control","mt-2"],["href","https://spotify.com/login","target","_blank",1,"btn","btn-neutral","text-lg"],["fill","currentColor","width","24","height","24","xmlns","http://www.w3.org/2000/svg","fill-rule","evenodd","clip-rule","evenodd"],["d","M19.098 10.638c-3.868-2.297-10.248-2.508-13.941-1.387-.593.18-1.22-.155-1.399-.748-.18-.593.154-1.22.748-1.4 4.239-1.287 11.285-1.038 15.738 1.605.533.317.708 1.005.392 1.538-.316.533-1.005.709-1.538.392zm-.126 3.403c-.272.44-.847.578-1.287.308-3.225-1.982-8.142-2.557-11.958-1.399-.494.15-1.017-.129-1.167-.623-.149-.495.13-1.016.624-1.167 4.358-1.322 9.776-.682 13.48 1.595.44.27.578.847.308 1.286zm-1.469 3.267c-.215.354-.676.465-1.028.249-2.818-1.722-6.365-2.111-10.542-1.157-.402.092-.803-.16-.895-.562-.092-.403.159-.804.562-.896 4.571-1.045 8.492-.595 11.655 1.338.353.215.464.676.248 1.028zm-5.503-17.308c-6.627 0-12 5.373-12 12 0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"],["id","spotify-embed","src","https://open.spotify.com/embed/track/2bNCdW4rLnCTzgqUXTTDO1?utm_source=generator","width","1","height","1","frameBorder","0","allow","autoplay; clipboard-write; encrypted-media; picture-in-picture",1,"hidden"]],template:function(d,t){if(d&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Start now!"),i(),n(5,"p",4),a(6,"Enter a spotify playlist or select a preconfigured playlist to play a game of Hitster!"),i()(),n(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8)(11,"span",9),a(12,"Spotify Playlist"),i()(),n(13,"div",10)(14,"input",11),c("ngModelChange",function(){return t.inputChange()})("ngModelChange",function(p){return t.inputString=p}),i(),u(15,Z,3,2,"button",12),i()(),n(16,"div",7)(17,"label",8)(18,"span",9),a(19,"Playlist"),i()(),n(20,"select",13),c("change",function(){return t.selectChange()})("ngModelChange",function(p){return t.selectString=p}),n(21,"option",14),a(22),i(),u(23,$,2,2,"option",15),N(24,"keyvalue"),i()(),n(25,"div",16)(26,"button",17),c("click",function(){return t.start()}),u(27,ee,2,0,"ng-container",18)(28,te,1,0,"ng-template",null,19,A),i()(),u(30,ne,5,2,"div",20),n(31,"details",21)(32,"summary",22),a(33,"Advanced Settings"),i(),n(34,"div",23)(35,"label",24)(36,"span",9),a(37,"Seed"),i(),n(38,"input",25),c("ngModelChange",function(p){return t.settings.seed=p}),i()(),n(39,"label",26)(40,"span",9),a(41,"Keep wrong guesses"),i(),n(42,"input",27),c("ngModelChange",function(p){return t.settings.keepWrongGuesses=p}),i()(),n(43,"select",28),c("ngModelChange",function(p){return t.settings.handleRemasters=p}),n(44,"option",29),a(45,"Fix Remasters"),i(),n(46,"option",30),a(47,"Keep Remasters"),i(),n(48,"option",31),a(49,"Remove Remasters"),i()()()()()()()(),u(50,ie,1,0,"iframe",32)),d&2){let m=F(29);l(14),r("ngModel",t.inputString)("ngModelOptions",f(20,_)),l(),r("ngIf",t.hasClipboard),l(5),r("ngModel",t.selectString)("ngModelOptions",f(21,_)),l(2),M(t.inputString?"Custom":"Select playlist?"),l(),r("ngForOf",j(24,18,t.playlists)),l(3),r("disabled",!t.validateInput()||t.loading),l(),r("ngIf",!t.loading)("ngIfElse",m),l(3),r("ngIf",!t.isMobile),l(8),r("ngModel",t.settings.seed)("ngModelOptions",f(22,_)),l(4),r("ngModel",t.settings.keepWrongGuesses)("ngModelOptions",f(23,_)),l(),r("ngModel",t.settings.handleRemasters)("ngModelOptions",f(24,_)),l(7),r("ngIf",!t.removeSpotifyEmbed)}},dependencies:[L,R,W,B,U,X,J,G,D,K,z,q]});let o=s;return o})();export{ge as HomeComponent};
